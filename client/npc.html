<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="./public/css/npc.css">
</head>
<body>
    <script>
        const NPCLIST = [
            {
                spot : "갯골생태공원",
                img : ["1-1", "1-2", "1-3"],
                npc : ["npc1", "npc2", "npc3", "npc4"],
                txt : 
                [
                    "갯골생태공원은 <span class='color'>150만평의 대규모 옛 염전 부지</span>에 형성된 <span class='color'>경기도 유일의 내만 갯골 습지</span>로 옛 염전의 정취를 느낄 수 있는 아름다운 곳이에요!",
                    "사시사철 변모하는 <span class='color'>아름다운 갯골의 풍경</span>은 다양한 식생 덕분이에요. 칠면초, 나문재, 퉁퉁마디 등의 염생식물과 붉은발 농게, 방게 등 각종어류, 양서류까지 <span class='color'>수도권 가장 가까운 곳</span>에서 생태의 소중함을 체험할 수 있죠",
                    "<span class='color'>2012년 2월</span>에는 국가습지보호구역으로 지정되며 친환경적 개발을 통해 국가적 명소화, 세계적 관광지화를 목표로 매년 <span class='color'>‘시흥갯골축제’</span>가 열리는 장소이기도 하답니다.",
                    "이 외에도 여러 가지 즐거움이 있는 <span class='color'>갯골생태공원</span>으로 지금 바로 놀러오시흥!"
                ],
                vod : 
                [
                    {
                        vodName : "‘서울근교 라이딩코스 초보자가 갈만한 자전거 여행’",
                        url : "https://www.youtube.com/embed/63ZPy9leMEI"
                    },
                    {
                        vodName : "‘갯골생태공원에 가면 내가 그린 그림이 있다?’",
                        url : "https://www.youtube.com/embed/0GvIsbT2aK0"
                    } 
                ]
            },
            {
                spot : "선사유적공원",
                img : ["2-1", "2-2", "2-3","2-4"],
                npc : ["npc1", "npc2", "npc3", "npc4", "npc5"],
                txt : 
                [
                    "오이도 유적은 우리나라 중부 서해안 지역의 <span class='color'>대표적인 패총(조개무덤)</span>으로서, 우리나라 선사시대 해안 생활상과 문화를 연구하는데 <span class='color'>귀중한 자료</span>로 활용되고 있어요. ",
                    "오이도 유적은 2002년 국가사적 제441호로 지정된 후 문화재의 보존과 활용을 위해 오이도 선사유적공원을 조성하고 <span class='color'>2018년 4월 10일</span>에 개장했어요. <span class='color'>드넓게 펼쳐진 오이도 선사유적공원</span>은 다양한 선사문화 생활상을 엿볼 수 있는 선사체험마을과 움집 체험이 가능한 야영마을, 발굴터, 사냥터 등으로 조성되어 있답니다.",
                    "이 외에도 신석기시대 오이도 패총의 중요성을 알려주는 <span class='color'>패총전시관</span>, 오이도의 낙조를 감상할 수 있는 <span class='color'>전망대</span>, 산책하기 좋은 억새길 등 다양한 볼거리를 제공하고 있으며, <span class='color'>1일 3회 무료</span>로 문화관광해설사의 해설과 함께 선사 유적을 관람할 수 있어요.",
                    "<span class='color'>선사유적공원</span>에 대해 더 알아보고 싶다면 아래 버튼을 클릭해보세요!",
                    "<span class='color'>오이도 선사유적공원</span>이 얼마나 재미있는지, 영상으로 확인해볼래요?"
                ],
                vod : 
                [
                    {
                        vodName : "‘[놀러오시흥] 오이도선사유적공원’",
                        url : "https://www.youtube.com/embed/geYoeygxu3w"
                    },
                    {
                        vodName : "‘[시흥하루] 서울근교로 당일치기 나들이 한옥뷰, 시흥하루 여행코스’",
                        url : "https://www.youtube.com/embed/KLIbFePcW58"
                    } 
                ]
            },
            {
                spot : "오이도박물관",
                img : ["3-1", "3-2", "3-3"],
                npc : ["npc1", "npc2", "npc3", "npc4"],
                txt : 
                [
                    "2019년 7월에 개관한 시흥오이도박물관은 오이도 유적(국가지정문화재 사적 제441호)에 위치하고 있어요.",
                    "오이도는 서해안 최대 패총유적지이자 다양한 신석기유물이 출토되어 선사시대 해안생활문화유산의 보존가치를 인정받는 곳으로 오이도박물관에는 오이도 유적뿐만 아니라, 시흥의 다양한 문화재까지 살펴볼 수 있는 전시와 체험이 이어진답니다. ",
                    "해질녘이 되면 쏟아지는 아름다운 노을과 해넘이와 바다도 만날 수 있는 도심 속 시민들의 편안한 휴식공간인 오이도 박물관을 경험해보시기 바라요.",
                    "멋진 여행으로 하루를 마무리 할 수 있는 오이도 박물관으로 놀러오실래요?",
                ],
                vod : 
                [
                    {
                        vodName : "‘6천년 전 시간 속으로 떠나는 오이도 박물관’",
                        url : "https://www.youtube.com/embed/2GbD13yUD5Y"
                    },
                    {
                        vodName : "‘[시흥크리에이터]시시콜콜때때와 함께하는 오이도박물관’",
                        url : "https://www.youtube.com/embed/qWZY44uqyMg"
                    } 
                ]
            },
            {
                spot : "오이도빨간등대꿈상회",
                img : ["4-1", "4-2", "4-3"],
                npc : ["npc1", "npc2", "npc3", "npc4"],
                txt : 
                [
                    "오이도는 원래 섬이었으나 매립이 되어 육지와 이어지게 된 지역으로<span class='color'> 갯벌을 메워 해양단지</span>를 조성했어요. 오이도 해양단지는 횟집과 조개구이집 등 맛집이 즐비하게 위치하여 있으며 사시사철 시민들에게 <span class='color'>즐거움을 선사하는 곳</span>이에요.",
                    "<span class='color'>해질 무렵 드리우는 오이도의 낙조</span>는 아름다운 시흥9경 중 하나로 손꼽히는 곳이며 저녁노을과 함께 지는 해를 바라보며 <span class='color'>아름다운 해안선과 붉은 석양</span>을 볼 수 있는 장소이죠.",
                    "오이도 선착장 입구에서 방문객을 반겨주는 <span class='color'>빨강 등대</span>는 오이도를 상징하는 대표 상징물로 일 년 내내 관광객의 사랑을 받는 오이도의 명소예요. 빨강 등대 옆에 나란히 위치한 <span class='color'>오이도꿈상회</span>에서는 시흥시 캐릭터인 <span class='color'>해로, 토로</span> 제품과 각종 시흥시 브랜드 상품을 합리적인 가격에 구매할 수 있죠.",
                ]
            },
            {
                spot : "물왕저수지",
                img : ["5-1", "5-2"],
                npc : ["npc1", "npc2", "npc3"],
                txt : 
                [
                    "시흥 최대의 <span class='color'>담수호</span>이자 대표 휴식처 물왕저수지예요. 물왕저수지의 다른 이름은 흥부저수지로 저수지를 설치할 당시 저수지의 행정구역이 시흥군과 부천군이었기 때문에 <span class='color'>시흥의 ‘흥’자와 부천군의 ‘부’자</span>를 취했다고 해요.",
                    "저수지를 따라 조성된 물왕둘레길을 따라 천천히 걷다보면 <span class='color'>아름다운 물왕저수지</span>가 한눈에 들어와요! 물왕저수지는 저수지 주변 구석 구석 <span class='color'>숨은 맛집</span>을 찾아다니는 재미가 있는데요, 밤이 되면 물에 비춰진 그림 또한 도시 내에서 향유할 수 없는 아름다움이에요.",
                ]
            }
        ]
        function npcScript(spotName) {
            const targetSpot = NPCLIST.filter(obj => {
                for (let key in obj) {
                    if (obj[key] === spotName) {
                        return true
                    }
                }
            })[0]
            // npc박스
            const npcbox = document.createElement('div');
            npcbox.dataset.idx = 0
            npcbox.classList.add('npcbox');
            // 장소이미지
            const detail_img = document.createElement('div');
            detail_img.classList.add('detail_img');
            const detail_innerImg = document.createElement('img');
            detail_innerImg.src = `./public/img/scene/${targetSpot.img[0]}.png`;
            detail_img.appendChild(detail_innerImg)
            // 말풍선
            const speech_bubble = document.createElement('div');
            speech_bubble.classList.add('speech_bubble');
            const npcimg = document.createElement('img');
            npcimg.classList.add('npcimg');
            npcimg.src = `./public/img/${targetSpot.npc[0]}.png`
            const npc_txt = document.createElement('p');
            npc_txt.classList.add('npc_txt');
            npc_txt.innerHTML = targetSpot.txt[0];
            //버튼
            const btn_wrap = document.createElement('div');
            btn_wrap.classList.add('btn_wrap');
            const continueButtom = document.createElement('button');
            continueButtom.classList.add('continue');
            continueButtom.textContent = "계속듣기";
            const canselButtom = document.createElement('button');
            canselButtom.classList.add('cansel');
            canselButtom.textContent = "닫기";
            btn_wrap.appendChild(continueButtom);
            btn_wrap.appendChild(canselButtom);
            speech_bubble.appendChild(npcimg);
            speech_bubble.appendChild(npc_txt);
            speech_bubble.appendChild(btn_wrap);
            npcbox.appendChild(detail_img)
            npcbox.appendChild(speech_bubble)
            document.querySelector('body').appendChild(npcbox);
            continueButtom.addEventListener('click',()=> {
                handleContinueButtom(npcbox.dataset.idx)
            })
            canselButtom.addEventListener('click',()=>{
                npcbox.remove()
            })
            function handleContinueButtom(currentIndex) {
                const index = Number(currentIndex);
                const {spot, img, npc, txt, vod} = targetSpot;
                // nextindex
                if (index + 1 === targetSpot.txt.length - 1) {
                    if (vod) {
                        const vod = document.createElement('iframe');
                        vod.src = targetSpot.vod[0].url;
                        detail_innerImg.remove()
                        detail_img.appendChild(vod);
                        npcimg.src = `./public/img/${targetSpot.npc[index+1]}.png`
                        npc_txt.innerHTML = targetSpot.txt[index+1];
                        const showVod_1 = document.createElement('button');
                        showVod_1.textContent = targetSpot.vod[0].vodName;
                        showVod_1.classList.add('showVod');
                        const showVod_2 = document.createElement('button');
                        showVod_2.textContent = targetSpot.vod[1].vodName
                        showVod_2.classList.add('showVod');
                        continueButtom.remove()
                        canselButtom.remove()
                        btn_wrap.appendChild(showVod_1)
                        btn_wrap.appendChild(showVod_2)
                        btn_wrap.appendChild(canselButtom)
                        if (document.querySelector('.outlink')) {
                            document.querySelector('.outlink').remove()
                        }
                        showVod_1.addEventListener('click',function(){
                            vod.src = targetSpot.vod[0].url
                        })
                        showVod_2.addEventListener('click',function(){
                            vod.src = targetSpot.vod[1].url
                        })
                    } else {
                        continueButtom.remove()
                        canselButtom.style.marginLeft = "auto"
                    }
                }
                // default
                if (index < targetSpot.txt.length - 1) {
                    if (img[index + 1] !== undefined) {
                        if (spot === "선사유적공원" && img[index +1] === "2-4") {
                            const outlink = document.createElement('a');
                            outlink.href = "https://oidomuseum.siheung.go.kr"
                            outlink.classList.add('outlink');
                            outlink.textContent = "홈페이지 바로가기"
                            outlink.target = "_blank";
                            continueButtom.remove()
                            canselButtom.remove()
                            btn_wrap.appendChild(continueButtom);
                            btn_wrap.appendChild(outlink);
                            btn_wrap.appendChild(canselButtom);
                        }
                        detail_innerImg.src = `./public/img/scene/${targetSpot.img[index+1]}.png`;
                        npcimg.src = `./public/img/${targetSpot.npc[index+1]}.png`
                        npc_txt.innerHTML = targetSpot.txt[index+1];
                        npcbox.dataset.idx = index + 1;
                    }
                }
            }
        }
    </script>
</body>
</html>